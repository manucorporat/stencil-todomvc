/*! Built with http://stenciljs.com */
todo.loadBundle("wnrsyqgf",["exports"],function(e){var t=window.todo.h,o=function(e,t,o){void 0===t&&(t=!1),void 0===o&&(o=function(){for(var e="",t=0;t<32;t++){var o=16*Math.random()|0;8!==t&&12!==t&&16!==t&&20!==t||(e+="-"),e+=(12===t?4:16===t?3&o|8:o).toString(16)}return e}()),this.title=e,this.completed=t,this.id=o},n=function(){function e(){this.todos=[]}return e.prototype.add=function(e){return this.save(this.todos.concat(new o(e)))},e.prototype.editTitle=function(e,t){return this.edit(e.id,function(e){return Object.assign({},e,{title:t})})},e.prototype.toggleCompleted=function(e){return this.edit(e.id,function(e){return Object.assign({},e,{completed:!e.completed})})},e.prototype.toggleAll=function(e){return this.save(this.todos.map(function(t){return Object.assign({},t,{completed:e})}))},e.prototype.delete=function(e){return this.save(this.todos.filter(function(t){return t.id!==e.id}))},e.prototype.clearCompleted=function(){return this.save(this.todos.filter(function(e){return!e.completed}))},e.prototype.load=function(){return window.localStorage?this.todos=JSON.parse(localStorage.getItem("todos-stencil")||"[]"):this.todos=[]},e.prototype.save=function(e){return window.localStorage&&localStorage.setItem("todos-stencil",JSON.stringify(e)),this.todos=e},e.prototype.edit=function(e,t){return this.save(this.todos.map(function(o){return e===o.id?t(o):o}))},e}(),i=function(){function e(){this.todoService=new n,this.todos=this.todoService.load(),this.filter="all"}return Object.defineProperty(e.prototype,"filteredTodos",{get:function(){switch(this.filter){case"active":return this.todos.filter(function(e){return!e.completed});case"completed":return this.todos.filter(function(e){return e.completed});default:return this.todos}},enumerable:!0,configurable:!0}),e.prototype.componentWillLoad=function(){this.updateFilterFromUrl(document.location.href)},e.prototype.render=function(){var e=this;return t("section",{class:"todoapp"},t("header",{class:"header"},t("h1",null,"todos"),t("input",{class:"new-todo",placeholder:"What needs to be done?",autoComplete:"on",autoFocus:!0,onKeyUp:function(t){return e.onKeyUp(t)}})),t("todo-list",{todos:this.filteredTodos}),this.todos.length>0?t("todo-footer",{todos:this.todos,filter:this.filter}):null)},e.prototype.todoDeleted=function(e){this.todos=this.todoService.delete(e.detail)},e.prototype.toggleCompleted=function(e){this.todos=this.todoService.toggleCompleted(e.detail)},e.prototype.editTitle=function(e){this.todos=this.todoService.editTitle(e.detail.todo,e.detail.newTitle)},e.prototype.toggleAll=function(e){this.todos=this.todoService.toggleAll(e.detail)},e.prototype.onKeyUp=function(e){if(13===e.keyCode){var t=e.target;""!==t.value.trim()&&(this.todos=this.todoService.add(t.value),t.value="")}},e.prototype.hashChanged=function(e){this.updateFilterFromUrl(e.newURL)},e.prototype.updateFilterFromUrl=function(e){this.filter=e&&e.split("#/")[1]||"all"},e.prototype.clearCompleted=function(){this.todos=this.todoService.clearCompleted()},Object.defineProperty(e,"is",{get:function(){return"todo-app"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{filter:{state:!0},todos:{state:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"listeners",{get:function(){return[{name:"todoDeleted",method:"todoDeleted"},{name:"toggleCompleted",method:"toggleCompleted"},{name:"editTitle",method:"editTitle"},{name:"toggleAll",method:"toggleAll"},{name:"window:hashchange",method:"hashChanged"},{name:"clearCompleted",method:"clearCompleted"}]},enumerable:!0,configurable:!0}),e}(),l=function(){function e(){}return e.prototype.render=function(){var e=this,o=null;return this.todos.some(function(e){return e.completed})&&(o=t("button",{class:"clear-completed",onClick:function(t){return e.clearCompleted.emit()}},"Clear completed")),t("footer",{class:"footer"},this.renderTodoCount(),t("ul",{class:"filters"},t("li",null,t("a",{class:{selected:"all"===this.filter},href:"#/"},"All")),t("li",null,t("a",{class:{selected:"active"===this.filter},href:"#/active"},"Active")),t("li",null,t("a",{class:{selected:"completed"===this.filter},href:"#/completed"},"Completed"))),o)},e.prototype.renderTodoCount=function(){var e=this.todos.filter(function(e){return!e.completed}).length;return t("span",{class:"todo-count"},t("strong",null,e)," ",e>1||e<1?"items":"item"," left")},Object.defineProperty(e,"is",{get:function(){return"todo-footer"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{filter:{type:String,attr:"filter"},todos:{type:"Any",attr:"todos"}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"events",{get:function(){return[{name:"clearCompleted",method:"clearCompleted",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),e}(),r=function(){function e(){}return e.prototype.render=function(){var e=this;return this.todos.length<=0?null:t("section",{class:"main"},t("input",{id:"toggle-all",class:"toggle-all",type:"checkbox",onClick:function(t){return e.onToggleAll()},checked:this.allCompleted()}),t("label",{htmlFor:"toggle-all"},"Mark all as complete"),t("ul",{class:"todo-list"},this.todos.map(function(t){return e.renderTodo(t)})))},e.prototype.renderTodo=function(e){var o=this;return t("li",{class:{completed:e.completed,editing:e.id===this.editing}},t("div",{class:"view"},t("input",{class:"toggle",type:"checkbox",checked:e.completed,onChange:function(t){return o.toggle(e)}}),t("label",{onDblClick:function(t){return o.edit(e,t)}},e.title),t("button",{class:"destroy",onClick:function(t){return o.deleteTodo(e)}})),t("input",{class:"edit",onBlur:function(t){return o.doneEdit(e,t)},onKeyUp:function(t){return o.onKeyUp(e,t)},value:e.title}))},e.prototype.allCompleted=function(){return 0===this.todos.filter(function(e){return!e.completed}).length},e.prototype.toggle=function(e){this.toggleCompleted.emit(e)},e.prototype.deleteTodo=function(e){this.todoDeleted.emit(e)},e.prototype.onToggleAll=function(){this.toggleAll.emit(!this.allCompleted())},e.prototype.edit=function(e,t){var o=this;this.editing=e.id,setTimeout(function(){var e=o.el.getElementsByClassName("editing")[0].getElementsByClassName("edit")[0];e.focus(),e.selectionStart=e.value.length},0)},e.prototype.onKeyUp=function(e,t){13===t.keyCode?this.doneEdit(e,t):27===t.keyCode&&(this.editing=null)},e.prototype.doneEdit=function(e,t){this.editing=null;var o=t.target.value.trim();o&&o.length>0?this.editTitle.emit({todo:e,newTitle:o}):this.deleteTodo(e)},Object.defineProperty(e,"is",{get:function(){return"todo-list"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{editing:{state:!0},el:{elementRef:!0},todos:{type:"Any",attr:"todos"}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"events",{get:function(){return[{name:"todoDeleted",method:"todoDeleted",bubbles:!0,cancelable:!0,composed:!0},{name:"toggleCompleted",method:"toggleCompleted",bubbles:!0,cancelable:!0,composed:!0},{name:"editTitle",method:"editTitle",bubbles:!0,cancelable:!0,composed:!0},{name:"toggleAll",method:"toggleAll",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),e}();e.TodoApp=i,e.TodoFooter=l,e.TodoList=r,Object.defineProperty(e,"__esModule",{value:!0})});